{% set name = "azure-cli-core" %}
{% set version = "2.17.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 27cdbff8e535c48788e2bf37113f7ad213182f5c0b32ffa13d5c013d478b8651

build:
  noarch: python
  number: 0
  script: {{ PYTHON }} -m pip install . --no-deps -vv

requirements:
  host:
    - python >=3
    - pip
  run:
    - python >=3
    - wheel
    - adal  ~=1.2.7
    - argcomplete  ~=1.8
    - azure-cli-telemetry  ==1.0.6.*
    - azure-common  ~=1.1
    - azure-mgmt-core  >=1.2.0,<1.3.0     # the preview version of azure-mgmt-core is 1.3.0b1 it cannot fit azure-core >=1.14.0
    - cryptography  >=3.2,<3.4
    - humanfriendly  >=4.7,<10.0
    - jmespath
    - knack  ~=0.8.2
    - msal  >=1.10.0,<2.0.0
    - paramiko  >=2.0.8,<3.0.0
    - pkginfo  >=1.5.0.1
    - PyJWT  >=2.1.0
    - pyopenssl  >=17.1.0  # https://github.com/pyca/pyopenssl/pull/612
    - requests  ~=2.25.1
    - six  ~=1.12
    - urllib3  >=1.26.5

test:
  imports:
    - azure
    - azure.cli
    - azure.cli.core
    - azure.cli.core.commands
    - azure.cli.core.extension
    - azure.cli.core.profiles

about:
  home: https://github.com/Azure/azure-cli
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: Microsoft Azure Command-Line Tools Core Module

  doc_url: https://docs.microsoft.com/en-us/cli/azure
  dev_url: https://github.com/Azure/azure-cli

extra:
  recipe-maintainers:
    - andreyz4k
